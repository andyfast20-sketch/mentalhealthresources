{% extends "base.html" %}

{% block hero %}
<div class="hero-grid">
    <div class="hero-copy">
        <p class="eyebrow">Trusted organisations</p>
        <h1>Charities ready to support you.</h1>
        <p class="lede">Explore helplines, community spaces, and specialist services handpicked for care and reliability.</p>
        <div class="cta-row">
            <a class="btn" href="#charity-list">Browse charities</a>
            <a class="btn ghost" href="{{ url_for('resources') }}">See more resources</a>
        </div>
    </div>
    <div class="hero-panel hero-image">
        <img src="https://files.catbox.moe/4v5qkq.png" alt="Illustration of supportive hands ready to support you" loading="lazy" />
    </div>
</div>
{% endblock %}

{% block content %}
<section id="charity-list" class="panel charity-panel">
    <div class="panel-header">
        <p class="eyebrow">Directory</p>
        <h2>Aligned, accessible support networks.</h2>
        <p class="lede">Every listing includes a quick description and a direct link so visitors can get help without extra clicks.</p>
    </div>
    <div class="charity-grid">
        {% for charity in charities %}
        <article class="charity-card">
            <div class="charity-header">
                <div class="charity-logo" aria-hidden="true">
                    {% if charity.logo_url %}
                    <img src="{{ charity.logo_url }}" alt="" loading="lazy" />
                    {% endif %}
                    <div class="logo-fallback {% if charity.logo_url %}hidden{% endif %}">ü§ù</div>
                </div>
                <div>
                    <p class="eyebrow">Charity</p>
                    <h3>{{ charity.name }}</h3>
                </div>
            </div>
            <div class="section-label" aria-hidden="true">Support options</div>
            <div class="charity-meta">
                {% if charity.has_helpline %}
                <span class="chip">Helpline</span>
                {% endif %}
                {% if charity.has_live_chat %}
                <span class="chip">Live chat</span>
                {% endif %}
                {% if charity.has_text_support %}
                <span class="chip">Text support</span>
                {% endif %}
                {% if charity.has_email_support %}
                <span class="chip">Email support</span>
                {% endif %}
                {% if charity.has_volunteers %}
                <span class="chip">Volunteers</span>
                {% endif %}
                {% if charity.has_crisis_info %}
                <span class="chip">Crisis info</span>
                {% endif %}
            </div>
            <p class="charity-description">{{ charity.description }}</p>
            <div class="section-label" aria-hidden="true">Contact details</div>
            <dl class="charity-contact-list">
                {% if charity.telephone %}
                <div class="contact-row">
                    <dt>Phone</dt>
                    <dd>{{ charity.telephone }}</dd>
                </div>
                {% endif %}
                {% if charity.text_number %}
                <div class="contact-row">
                    <dt>Text</dt>
                    <dd>{{ charity.text_number }}</dd>
                </div>
                {% endif %}
                {% if charity.contact_email %}
                <div class="contact-row">
                    <dt>Email</dt>
                    <dd>{{ charity.contact_email }}</dd>
                </div>
                {% endif %}
                {% if charity.helpline_hours %}
                <div class="contact-row">
                    <dt>Hours</dt>
                    <dd>{{ charity.helpline_hours }}</dd>
                </div>
                {% endif %}
            </dl>
            <div class="charity-actions">
                <button
                    class="btn tiny"
                    type="button"
                    data-charity-trigger
                    data-charity-name="{{ charity.name }}"
                    data-charity-description="{{ charity.description }}"
                    data-charity-telephone="{{ charity.telephone }}"
                    data-charity-contact-email="{{ charity.contact_email }}"
                    data-charity-text-number="{{ charity.text_number }}"
                    data-charity-helpline-hours="{{ charity.helpline_hours }}"
                    data-charity-website="{{ charity.website_url }}"
                    data-charity-has-helpline="{{ charity.has_helpline }}"
                    data-charity-has-volunteers="{{ charity.has_volunteers }}"
                    data-charity-has-crisis-info="{{ charity.has_crisis_info }}"
                    data-charity-has-text-support="{{ charity.has_text_support }}"
                    data-charity-has-email-support="{{ charity.has_email_support }}"
                    data-charity-has-live-chat="{{ charity.has_live_chat }}"
                >
                    Visit site
                </button>
            </div>
        </article>
        {% else %}
        <p class="body">Add a charity from the admin page to see it here.</p>
        {% endfor %}
    </div>
</section>
{% endblock %}
