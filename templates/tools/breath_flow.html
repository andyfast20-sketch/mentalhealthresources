{% extends "base.html" %}

{% block hero %}
<section class="calm-hero hero-grid flow-hero">
    <div class="hero-copy">
        <p class="eyebrow">Guided breath studio</p>
        <h1>Breath Flow</h1>
        <p class="lede">An elegant breathing lane with tight alignment, a clean grid, and only the essentials on screen. Dial the pace, watch the ring respond, and settle into a rhythm that feels sensationally smooth.</p>
        <div class="flow-hero__metrics">
            <div class="metric-pill">
                <p class="microcopy muted">Guided starts</p>
                <p class="stat-number" data-calming-view="{{ tool.slug }}">{{ view_count }}</p>
                <p class="stat-helper">Times the flow button was pressed</p>
            </div>
            <div class="metric-pill">
                <p class="microcopy muted">Completion taps</p>
                <p class="stat-number" data-calming-count="{{ tool.slug }}">{{ completed_count }}</p>
                <p class="stat-helper">Visitors logging this practice</p>
            </div>
            <div class="metric-pill">
                <p class="microcopy muted">Aligned pacing</p>
                <p class="stat-number">4 • 2 • 5 • 2</p>
                <p class="stat-helper">Inhale • hold • exhale • hold</p>
            </div>
        </div>
        <div class="calm-hero__actions">
            <a class="btn" href="#interactive-calm">Start guided flow</a>
            <a class="btn ghost" href="{{ url_for('calming_tools') }}">Back to overview</a>
        </div>
    </div>
    <div class="calm-hero__panel flow-panel">
        <div class="calm-hero__panel-inner">
            <p class="eyebrow">Everything aligned</p>
            <h3>Wave, timing, and cues all sit on one clean grid.</h3>
            <p class="body">Nothing extra, nothing distracting. Use the controls to set your cycle, watch the ring mirror each phase, and keep your eyes on the central cue.</p>
            <ul class="flow-list">
                <li>Responsive ring that scales with inhale and exhale</li>
                <li>One glance chips to show which phase you are in</li>
                <li>Session timer and affirmation tucked neatly below</li>
            </ul>
            <div class="calm-hero__panel-actions">
                <a class="btn tiny" href="{{ url_for('calming_tools') }}">Explore calming tools</a>
                <a class="btn ghost tiny" href="https://youtu.be/3cXGt2d1RyQ?si=fW6VP-S2ooxIlJdK" target="_blank" rel="noopener">Watch calming video</a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block content %}
<section class="calm-lab" id="interactive-calm">
    <div class="calm-lab__header flow-board__header">
        <div>
            <p class="eyebrow">Interactive</p>
            <h2>Turn the dial, keep the visuals perfectly aligned.</h2>
            <p class="lede">Set a soft rhythm, glide through each inhale and exhale, and let the ring and chips keep you oriented without extra clutter.</p>
        </div>
        <div class="calm-lab__badges flow-badges">
            <span class="chip ghost">Session timer</span>
            <span class="chip ghost">Wave intensity</span>
            <span class="chip ghost">Aligned cues</span>
        </div>
    </div>
    <div class="calm-lab__grid flow-board">
        <div class="control-stack duo flow-controls">
            <div class="control-card slim">
                <div class="control-card__header">
                    <p class="eyebrow muted">Timing</p>
                    <p class="microcopy" data-cycle-preview>4s inhale • 2s hold • 5s exhale • 2s hold</p>
                </div>
                <div class="control-row refined compact">
                    <label class="control">
                        <span>Inhale (seconds)</span>
                        <input type="number" min="1" max="20" value="4" step="0.5" data-inhale-input />
                        <span class="value">Lengthen the in-breath.</span>
                    </label>
                    <label class="control">
                        <span>Hold (seconds)</span>
                        <input type="number" min="0" max="20" value="2" step="0.5" data-hold-input />
                        <span class="value">Linger lightly at the top.</span>
                    </label>
                    <label class="control">
                        <span>Exhale (seconds)</span>
                        <input type="number" min="1" max="20" value="5" step="0.5" data-exhale-input />
                        <span class="value">Let the breath drift out.</span>
                    </label>
                </div>
            </div>
            <div class="control-card slim">
                <div class="control-card__header">
                    <p class="eyebrow muted">Session feel</p>
                    <p class="microcopy">Keep the visuals steady and grounded.</p>
                </div>
                <div class="control-row refined compact">
                    <label class="control">
                        <span>Session length (minutes)</span>
                        <input type="number" min="1" max="30" value="5" step="1" data-session-input />
                        <span class="value" data-session-remaining>5:00 remaining</span>
                    </label>
                    <label class="control">
                        <span>Wave intensity</span>
                        <input type="range" min="0.8" max="1.4" value="1" step="0.1" data-wave-range />
                        <span class="value" data-wave-value>Balanced</span>
                    </label>
                </div>
            </div>
            <div class="calm-lab__actions">
                <button class="btn" type="button" data-calm-start data-calming-slug="{{ tool.slug }}">Start flow</button>
                <button class="btn ghost" type="button" data-calm-reset>Reset</button>
                <p class="body" data-affirmation>Pick timing that feels supportive and press “Start flow.”</p>
            </div>
            <div class="flow-footnote">
                <p class="microcopy">Every slider and number sits on the same rhythm as the ring so your eyes never hunt for the next cue.</p>
            </div>
        </div>
        <div class="immersive-visual elevated flow-visual">
            <span class="flow-visual__halo"></span>
            <span class="flow-visual__halo halo-secondary"></span>
            <div class="flow-visual__header">
                <a class="btn ghost calm-video-link" href="https://youtu.be/H1pBZ9JQWEI?si=kOm7fi_PqO9Rnwd-" target="_blank" rel="noopener">
                    Play calming guidance
                </a>
                <span class="chip ghost">Glowing rhythm</span>
            </div>
            <div class="flow-visual__arena">
                <div class="pulse-ring" data-pulse-ring></div>
                <div class="phase-label" data-phase-label>Ready when you are</div>
                <div class="flow-wave" aria-hidden="true">
                    <div class="flow-wave__rail">
                        <div class="flow-wave__fill" data-wave-fill></div>
                        <div class="flow-wave__dot" data-wave-dot>
                            <span class="flow-wave__dot-glow"></span>
                            <span class="flow-wave__phase" data-wave-phase>Flow ready</span>
                        </div>
                    </div>
                </div>
                <div class="phase-timeline" data-phase-timeline>
                    <span class="chip">Inhale</span>
                    <span class="chip">Hold</span>
                    <span class="chip">Exhale</span>
                    <span class="chip">Hold</span>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
    <script src="/static/js/breath-flow.js"></script>
{% endblock %}
