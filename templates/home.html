{% extends "base.html" %}

{% block hero %}
<div class="hero-grid">
    <div class="hero-copy">
        <p class="eyebrow">Here for you, 24/7</p>
        <h1>A vibrant hub of mental health support.</h1>
        <p class="lede">Explore immediate crisis help, therapy directories, calming tools, and guides for you and your support circle. Every link is handpicked to feel safe, practical, and hopeful.</p>
        <div class="cta-row">
            <a class="btn" href="{{ url_for('resources') }}">Browse Resources</a>
            <a class="btn ghost" href="{{ url_for('calming_tools') }}">Find calm now</a>
        </div>
        <div class="trust">Curated with care â€¢ Human-reviewed â€¢ Free to explore</div>
    </div>
    <div class="hero-panel hero-image">
        <img src="{{ url_for('static', filename='uploads/community-support.svg') }}" alt="Illustration of gentle community support" />
    </div>
</div>
{% endblock %}

{% block content %}
<section id="talking-therapies" class="panel info-panel">
    <div class="panel-header">
        <p class="eyebrow">Talking therapies</p>
        <h2>Find NHS support for anxiety and depression.</h2>
        <p class="lede">You can refer yourself to NHS talking therapies without a diagnosis. The service connects you with evidence-based support when low mood, worry, or anxious thoughts feel hard to shift.</p>
    </div>
    <div class="info-grid">
        <article class="info-card">
            <h3>Who can self-refer</h3>
            <ul class="body">
                <li>Living in England</li>
                <li>Aged 18+ (some areas welcome 16â€“17)</li>
                <li>No diagnosis needed to get started</li>
                <li>Under 18? Check local children and young peopleâ€™s services.</li>
            </ul>
        </article>
        <article class="info-card">
            <h3>When it may help</h3>
            <ul class="body">
                <li>Persistent low mood or constant worry</li>
                <li>Social anxiety, panic, phobias, or OCD</li>
                <li>Health anxiety, PTSD, or body dysmorphic disorder</li>
                <li>Depression or anxiety alongside long-term conditions</li>
            </ul>
        </article>
        <article class="info-card highlight">
            <h3>How to refer yourself</h3>
            <p class="body">Enter your GP surgery name to find local talking therapies. The service will contact you, share wait times, and explain whatâ€™s passed on to your GP. You can also ask your GP to refer you or speak with them first if youâ€™re unsure what you need.</p>
            <div class="cta-row">
                <a class="btn tiny" href="https://www.nhs.uk/mental-health/talking-therapies-medicine-treatments/talking-therapies-and-counselling/nhs-talking-therapies/" target="_blank" rel="noopener">Find NHS talking therapies</a>
                <a class="btn ghost tiny" href="https://www.nhs.uk/mental-health/talking-therapies-medicine-treatments/talking-therapies-and-counselling/nhs-talking-therapies/" target="_blank" rel="noopener">How it works</a>
            </div>
        </article>
    </div>
</section>

<section id="charities" class="panel charity-panel">
    <div class="panel-header">
        <p class="eyebrow">Give back</p>
        <h2>Charities championing mental health.</h2>
        <p class="lede">Explore vetted organizations making access to care, crisis support, and belonging possible. Add your own favorites through the admin space.</p>
    </div>
    <div class="charity-grid">
        {% for charity in charities %}
        <article class="charity-card">
            <div class="charity-top">
                <div class="charity-logo" aria-hidden="true">
                    <img src="{{ charity.logo_url }}" alt="{{ charity.name }} logo" loading="lazy" />
                </div>
                <div class="charity-meta">
                    <p class="eyebrow">Featured</p>
                    <h3>{{ charity.name }}</h3>
                </div>
            </div>
            <p class="body">{{ charity.description }}</p>
            <div class="charity-actions">
                <a class="btn tiny" href="{{ charity.site_url }}" target="_blank" rel="noopener">Visit site</a>
                <div class="halo"></div>
            </div>
        </article>
        {% endfor %}
    </div>
    <div class="charity-footer">
        <p class="body">We refresh these highlights each visit. Want to see everyone? </p>
        <button class="btn ghost tiny" type="button" data-show-charities>Show more</button>
    </div>

    <div class="modal-backdrop" data-charity-modal>
        <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="charityModalTitle">
            <div class="modal-header">
                <div>
                    <p class="eyebrow">Explore the full list</p>
                    <h3 id="charityModalTitle">Every charity in our library</h3>
                </div>
                <button class="modal-close" type="button" aria-label="Close charity list" data-modal-close>&times;</button>
            </div>
            <p class="body muted">Browse every organization you can add and feature through admin.</p>
            <div class="modal-grid">
                {% for charity in all_charities %}
                <article class="charity-card">
                    <div class="charity-top">
                        <div class="charity-logo" aria-hidden="true">
                            <img src="{{ charity.logo_url }}" alt="{{ charity.name }} logo" loading="lazy" />
                        </div>
                        <div class="charity-meta">
                            <p class="eyebrow">{{ charity.name }}</p>
                            <h3>{{ charity.name }}</h3>
                        </div>
                    </div>
                    <p class="body">{{ charity.description }}</p>
                    <div class="charity-actions">
                        <a class="btn tiny" href="{{ charity.site_url }}" target="_blank" rel="noopener">Visit site</a>
                        <div class="halo"></div>
                    </div>
                </article>
                {% endfor %}
            </div>
        </div>
    </div>
</section>

<section id="books" class="panel book-panel">
    <div class="panel-header">
        <p class="eyebrow">Helpful reads</p>
        <h2>Useful books to keep close.</h2>
        <p class="lede">Curated titles with gentle guidance, stories of resilience, and science-backed skills. Add more anytime through admin.</p>
    </div>
    <div class="book-scroller">
        <button class="book-nav prev" type="button" aria-label="Scroll books left" data-book-prev>&larr;</button>
        <div class="book-track" data-book-track>
            {% for book in books %}
            <article
                class="book-card"
                data-book-index="{{ book.index }}"
                data-book-title="{{ book.title }}"
                data-book-author="{{ book.author }}"
                data-book-description="{{ book.description }}"
                data-book-cover="{{ book.cover_url }}"
                data-book-link="{{ book.affiliate_url }}"
            >
                <div class="book-cover" aria-hidden="true">
                    {% if book.cover_url %}
                    <img src="{{ book.cover_url }}" alt="{{ book.title }} cover" loading="lazy" />
                    {% else %}
                    <div class="cover-placeholder">ðŸ“–</div>
                    {% endif %}
                </div>
                <div class="book-meta">
                    <p class="eyebrow">{{ book.author }}</p>
                    <h3>{{ book.title }}</h3>
                    <p class="body book-description">{{ book.description }}</p>
                </div>
                <div class="book-actions">
                    <button class="btn tiny" type="button" data-book-trigger aria-expanded="false">View book</button>
                    <div class="halo"></div>
                </div>
            </article>
            {% endfor %}
        </div>
        <button class="book-nav next" type="button" aria-label="Scroll books right" data-book-next>&rarr;</button>
    </div>
    <div class="charity-footer">
        <p class="body">Want more recommendations? Explore the full shelf.</p>
        <a class="btn ghost tiny" href="{{ url_for('books') }}">Show more</a>
    </div>
</section>

<section class="panel gradient-panel">
    <div class="panel-header">
        <p class="eyebrow">Staying safe</p>
        <h2>Save these steps for tough moments.</h2>
        <p class="lede">If you or someone you love is in danger, call local emergency services or the nearest crisis line. You deserve immediate support.</p>
    </div>
    <div class="steps">
        <div class="step">
            <span class="step-number">1</span>
            <div>
                <h4>Pause & breathe</h4>
                <p class="body">Notice five things you can see. Feel your feet on the ground. Take one slow inhale and exhale.</p>
            </div>
        </div>
        <div class="step">
            <span class="step-number">2</span>
            <div>
                <h4>Call or text a crisis line</h4>
                <p class="body">People are ready to listen without judgment. Your feelings matter.</p>
            </div>
        </div>
        <div class="step">
            <span class="step-number">3</span>
            <div>
                <h4>Share your plan</h4>
                <p class="body">Tell a friend, family member, or clinician you trust what youâ€™re experiencing.</p>
            </div>
        </div>
    </div>
</section>
{% endblock %}
