{% extends "base.html" %}

{% block hero %}
<div class="hero-grid">
    <div class="hero-copy">
        <p class="eyebrow">Here for you, 24/7</p>
        <h1>A vibrant hub of mental health support.</h1>
        <p class="lede">Explore immediate crisis help, therapy directories, calming tools, and guides for you and your support circle. Every link is handpicked to feel safe, practical, and hopeful.</p>
        <div class="cta-row">
            <a class="btn" href="{{ url_for('resources') }}">Browse Resources</a>
            <a class="btn ghost" href="{{ url_for('calming_tools') }}">Find calm now</a>
        </div>
        <div class="trust">Curated with care ‚Ä¢ Human-reviewed ‚Ä¢ Free to explore</div>
    </div>
    <div class="hero-panel hero-image">
        <img src="https://files.catbox.moe/wnydxb.png" alt="Illustration of gentle community support" loading="eager" />
    </div>
</div>
{% endblock %}

{% block content %}
<section class="panel did-you-know-panel">
    <div class="panel-header">
        <p class="eyebrow">Fresh reminders</p>
        <h2>Did you know?</h2>
        <p class="lede">Quick truths that make it easier to reach out. Update these anytime in the admin dashboard and they‚Äôll refresh here instantly.</p>
    </div>
    <div class="did-you-know-grid">
        {% for item in did_you_know_items %}
        <article class="did-you-know-card">
            <div class="did-you-know-accent" aria-hidden="true"></div>
            <div class="did-you-know-content">
                <p class="eyebrow">{{ "%02d" | format(loop.index) }}</p>
                <h3>{{ item.headline }}</h3>
                <p class="body">{{ item.detail or "Add more context so people know what to expect." }}</p>
                {% if item.cta_label and item.cta_url %}
                <a class="btn tiny ghost" href="{{ item.cta_url }}">{{ item.cta_label }}</a>
                {% endif %}
            </div>
        </article>
        {% else %}
        <p class="body">Add a ‚ÄúDid you know?‚Äù in admin to spotlight fast, practical ways to get help.</p>
        {% endfor %}
    </div>
</section>
<section id="talking-therapies" class="panel info-panel">
    <div class="panel-header">
        <p class="eyebrow">Talking therapies</p>
        <h2>Find NHS support for anxiety and depression.</h2>
        <p class="lede">You can refer yourself to NHS talking therapies without a diagnosis. The service connects you with evidence-based support when low mood, worry, or anxious thoughts feel hard to shift.</p>
    </div>
    <div class="info-grid">
        <article class="info-card">
            <h3>Who can self-refer</h3>
            <ul class="body">
                <li>Living in England</li>
                <li>Aged 18+ (some areas welcome 16‚Äì17)</li>
                <li>No diagnosis needed to get started</li>
                <li>Under 18? Check local children and young people‚Äôs services.</li>
            </ul>
        </article>
        <article class="info-card">
            <h3>When it may help</h3>
            <ul class="body">
                <li>Persistent low mood or constant worry</li>
                <li>Social anxiety, panic, phobias, or OCD</li>
                <li>Health anxiety, PTSD, or body dysmorphic disorder</li>
                <li>Depression or anxiety alongside long-term conditions</li>
            </ul>
        </article>
        <article class="info-card highlight">
            <h3>How to refer yourself</h3>
            <p class="body">Enter your GP surgery name to find local talking therapies. The service will contact you, share wait times, and explain what‚Äôs passed on to your GP. You can also ask your GP to refer you or speak with them first if you‚Äôre unsure what you need.</p>
            <div class="cta-row">
                <a class="btn tiny" href="https://www.nhs.uk/mental-health/talking-therapies-medicine-treatments/talking-therapies-and-counselling/nhs-talking-therapies/" target="_blank" rel="noopener">Find NHS talking therapies</a>
                <a class="btn ghost tiny" href="https://www.nhs.uk/mental-health/talking-therapies-medicine-treatments/talking-therapies-and-counselling/nhs-talking-therapies/" target="_blank" rel="noopener">How it works</a>
            </div>
        </article>
    </div>
</section>

<section id="books" class="panel book-panel">
    <div class="panel-header">
        <p class="eyebrow">Helpful reads</p>
        <h2>Useful books to keep close.</h2>
        <p class="lede">Curated titles with gentle guidance, stories of resilience, and science-backed skills. Add more anytime through admin.</p>
    </div>
    <div class="book-scroller">
        <button class="book-nav prev" type="button" aria-label="Scroll books left" data-book-prev>&larr;</button>
        <div class="book-track" data-book-track>
            {% for book in books %}
            <article
                class="book-card"
                data-book-index="{{ book.index }}"
                data-book-slug="{{ book.slug }}"
                data-book-title="{{ book.title }}"
                data-book-author="{{ book.author }}"
                data-book-description="{{ book.description }}"
                data-book-cover="{{ book.cover_url }}"
                data-book-link="{{ book.affiliate_url }}"
            >
                <div class="book-cover" aria-hidden="true">
                    {% if book.cover_url %}
                    <img src="{{ book.cover_url }}" alt="{{ book.title }} cover" loading="lazy" />
                    {% else %}
                    <div class="cover-placeholder">üìñ</div>
                    {% endif %}
                </div>
                <div class="book-meta">
                    <p class="eyebrow">{{ book.author }}</p>
                    <h3>{{ book.title }}</h3>
                    <p class="body book-description">{{ book.description }}</p>
                </div>
                <div class="book-actions">
                    <button class="btn tiny" type="button" data-book-trigger aria-expanded="false">View book</button>
                    <div class="halo"></div>
                </div>
            </article>
            {% endfor %}
        </div>
        <button class="book-nav next" type="button" aria-label="Scroll books right" data-book-next>&rarr;</button>
    </div>
    <div class="book-footer">
        <p class="body">Want more recommendations? Explore the full shelf.</p>
        <a class="btn ghost tiny" href="{{ url_for('books') }}">Show more</a>
    </div>
</section>

<section class="panel charity-panel">
    <div class="panel-header">
        <p class="eyebrow">Community partners</p>
        <h2>Charities offering direct support.</h2>
        <p class="lede">Explore trusted organisations that provide helplines, peer spaces, and culturally informed care.</p>
    </div>
    <div class="charity-grid">
        {% for charity in charities[:4] %}
        <article class="charity-card">
            <div class="charity-header">
                <div class="charity-logo" aria-hidden="true">
                    {% if charity.logo_url %}
                    <img src="{{ charity.logo_url }}" alt="" loading="lazy" />
                    {% else %}
                    <div class="logo-fallback">ü§ù</div>
                    {% endif %}
                </div>
                <div>
                    <p class="eyebrow">Charity</p>
                    <h3>{{ charity.name }}</h3>
                </div>
            </div>
            <p class="body">{{ charity.description }}</p>
            <div class="charity-actions">
                <button
                    class="btn tiny"
                    type="button"
                    data-charity-trigger
                    data-charity-name="{{ charity.name }}"
                    data-charity-description="{{ charity.description }}"
                    data-charity-telephone="{{ charity.telephone }}"
                    data-charity-website="{{ charity.website_url }}"
                    data-charity-has-helpline="{{ charity.has_helpline }}"
                    data-charity-has-volunteers="{{ charity.has_volunteers }}"
                    data-charity-has-crisis-info="{{ charity.has_crisis_info }}"
                    data-charity-has-text-support="{{ charity.has_text_support }}"
                    data-charity-has-email-support="{{ charity.has_email_support }}"
                    data-charity-has-live-chat="{{ charity.has_live_chat }}"
                >
                    Visit site
                </button>
            </div>
        </article>
        {% else %}
        <p class="body">Charities added in admin will appear here.</p>
        {% endfor %}
    </div>
    <div class="book-footer charity-footer">
        <p class="body">Want to see everything we‚Äôve curated?</p>
        <a class="btn ghost tiny" href="{{ url_for('charities_page') }}">View all charities</a>
    </div>
</section>

<section class="panel gradient-panel">
    <div class="panel-header">
        <p class="eyebrow">Staying safe</p>
        <h2>Save these steps for tough moments.</h2>
        <p class="lede">If you or someone you love is in danger, call local emergency services or the nearest crisis line. You deserve immediate support.</p>
    </div>
    <div class="steps">
        <div class="step">
            <span class="step-number">1</span>
            <div>
                <h4>Pause & breathe</h4>
                <p class="body">Notice five things you can see. Feel your feet on the ground. Take one slow inhale and exhale.</p>
            </div>
        </div>
        <div class="step">
            <span class="step-number">2</span>
            <div>
                <h4>Call or text a crisis line</h4>
                <p class="body">People are ready to listen without judgment. Your feelings matter.</p>
            </div>
        </div>
        <div class="step">
            <span class="step-number">3</span>
            <div>
                <h4>Share your plan</h4>
                <p class="body">Tell a friend, family member, or clinician you trust what you‚Äôre experiencing.</p>
            </div>
        </div>
    </div>
</section>
{% endblock %}
