{% extends "base.html" %}

{% block hero %}
<div class="hero-grid compact">
    <div class="hero-copy">
        <p class="eyebrow">Resource Library</p>
        <h1>Curated links for support, learning, and care.</h1>
        <p class="lede">Every resource is reviewed for clarity, accessibility, and respect. Browse by section or use the tags below to jump straight to what you need.</p>
        <div class="cta-row">
            <a class="btn" href="#resources">Start exploring</a>
            <button class="pill" id="filter-reset" aria-label="Reset filters">Reset Filters</button>
            <a class="pill ghost" href="#chat-room">Join the chat room</a>
        </div>
    </div>
    <div class="hero-visual resources-visual" aria-hidden="true">
        <div class="visual-backdrop"></div>
        <img src="https://files.catbox.moe/hkbgcb.png" alt="Soft gradient collage with notes and petals" loading="lazy" />
        <div class="visual-caption glassy">Moodboard vibes to keep the resource hunt gentle.</div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{ url_for('static', filename='js/chat-room.js') }}"></script>
{% endblock %}

{% block content %}
<section class="panel resource-panel">
    <div class="attachment-board">
        <div class="board-header">
            <p class="eyebrow">Attachments 2-4</p>
            <h3>Quick topic snapshots to explore next.</h3>
            <p class="body">We grouped the most requested guides so you can scan what resonates and dive straight into the right attachment.</p>
        </div>
        <div class="attachment-grid">
            <article class="attachment-card">
                <div class="attachment-heading">
                    <p class="eyebrow">Attachment 2</p>
                    <h4>Anxiety</h4>
                </div>
                <ul class="attachment-list">
                    <li>
                        <button type="button" class="attachment-link" data-anxiety-trigger>What is Anxiety?</button>
                    </li>
                    <li>
                        <button type="button" class="attachment-link" data-anxiety-video-trigger>Anxiety Symptoms Explained</button>
                    </li>
                    <li>How Correct Breathing Reduces Anxiety</li>
                    <li>The Fight, Flight or Freeze Response</li>
                    <li>Unreality</li>
                    <li>Generalised Anxiety Disorder</li>
                    <li>Health Anxiety</li>
                    <li>Social Anxiety</li>
                    <li>Anxiety and Phobias in Children</li>
                    <li>Post Traumatic Stress Disorder</li>
                    <li>Self Harm</li>
                    <li>Trichotillomania</li>
                    <li>Selective Mutism</li>
                    <li>Hoarding</li>
                </ul>
            </article>

            <article class="attachment-card">
                <div class="attachment-heading">
                    <p class="eyebrow">Attachment 3</p>
                    <h4>O.C.D.</h4>
                </div>
                <ul class="attachment-list">
                    <li>What is Obsessive Compulsive Disorder?</li>
                    <li>OCD in Children</li>
                    <li>OCD and its Treatment</li>
                    <li>Am I Going Mad</li>
                </ul>
            </article>

            <article class="attachment-card">
                <div class="attachment-heading">
                    <p class="eyebrow">Attachment 4</p>
                    <h4>Panic Attacks</h4>
                </div>
                <ul class="attachment-list">
                    <li>What is a Panic Attack?</li>
                    <li>Strategies for Coping with Panic</li>
                    <li>Do Panic Attacks Cause Heart Attacks?</li>
                    <li>Spontaneous Panic</li>
                </ul>
            </article>
        </div>
    </div>

    <div class="resource-video" aria-label="Guided grounding video">
        <div class="resource-video__copy">
            <p class="eyebrow">Take a moment</p>
            <h3>Ground with a gentle walkthrough</h3>
            <p class="body">Press play when you're ready to follow along with a short, supportive check-in.</p>
        </div>
        <div class="resource-video__player">
            <video controls playsinline poster="https://files.catbox.moe/hkbgcb.png" aria-label="Grounding video walkthrough">
                <source src="https://files.catbox.moe/k4xou3.mp4" type="video/mp4" />
                Your browser does not support the video tag.
            </video>
        </div>
    </div>

    <div class="filters-card">
        <div class="filters-copy">
            <h3>Filter by feeling</h3>
            <p class="body">Tap a tag to jump straight to the resources that match your current headspace. Reset brings everything back.</p>
            <button class="pill" id="filter-reset" aria-label="Reset filters">Reset Filters</button>
        </div>
        <div class="tag-rail" aria-label="Resource filters">
            <div class="tag-row" id="tag-row">
                <button class="tag" data-tag="urgent">urgent</button>
                <button class="tag" data-tag="therapy">therapy</button>
                <button class="tag" data-tag="mindfulness">mindfulness</button>
                <button class="tag" data-tag="community">community</button>
                <button class="tag" data-tag="education">education</button>
                <button class="tag" data-tag="apps">apps</button>
                <button class="tag" data-tag="family">family</button>
            </div>
            <p class="microcopy">You can combine the tags with your own pace‚Äîhover cards for a little sparkle.</p>
        </div>
    </div>
</section>

<section class="panel chat-panel" id="chat-room">
    <div class="chat-shell">
        <div class="chat-room-card" aria-label="BrightMind chat room">
            <div class="chat-room__header">
                <div>
                    <p class="eyebrow">Live now</p>
                    <h4>Mental Health Support Chat</h4>
                </div>
                <div class="chat-room__status">
                    <span class="status-dot" aria-hidden="true"></span>
                    <span class="microcopy">ModBot is keeping the space respectful</span>
                </div>
            </div>
            <div class="chat-room__notice" role="status">
                <div class="notice-icon" aria-hidden="true">üõ°Ô∏è</div>
                <div>
                    <p class="body bold">ModBot reminder</p>
                    <p class="microcopy">No personal contact info or medical advice. Crisis? Tap Crisis info in the corner.</p>
                </div>
            </div>
            <div class="chat-room__log" data-chat-log aria-live="polite" aria-label="Chat messages"></div>
            <div class="chat-room__typing" data-chat-typing hidden>
                <span class="status-dot status-dot--pulse" aria-hidden="true"></span>
                <span class="microcopy" data-chat-typing-copy>Someone is typing‚Ä¶</span>
            </div>
            <div class="chat-room__footer">
                <div class="chat-prompts" aria-label="Quick prompts">
                    <button type="button" class="pill tiny ghost" data-chat-prompt="I could use some grounding tips today.">Grounding tips</button>
                    <button type="button" class="pill tiny ghost" data-chat-prompt="Anyone else dealing with anxious Sundays?">Sunday scaries</button>
                    <button type="button" class="pill tiny ghost" data-chat-prompt="Thank you for holding space, I really needed this.">Say thanks</button>
                </div>
                <form class="chat-form" data-chat-form>
                    <label class="sr-only" for="chat-input">Type a message</label>
                    <input id="chat-input" data-chat-input type="text" name="message" autocomplete="off" maxlength="280" placeholder="Share what's on your mind‚Ä¶" />
                    <button type="submit" class="btn tiny">Send</button>
                </form>
                <p class="microcopy muted">Bots share supportive replies using preset prompts‚Äîno personal data is sent anywhere.</p>
            </div>
        </div>
        <div class="chat-intro">
            <p class="eyebrow">New ¬∑ Softly moderated</p>
            <h3>Community chat room</h3>
            <p class="body">Drop straight into the room without detours. Quick prompts keep the conversation flowing while ModBot keeps everyone safe.</p>
            <div class="chat-highlights">
                <div class="chat-highlight">üí¨ Peer-to-peer support</div>
                <div class="chat-highlight">üõ°Ô∏è Safety reminders built-in</div>
                <div class="chat-highlight">‚ú® Minimal distractions</div>
            </div>
            <div class="chat-guidelines">
                <p class="microcopy">Community guidelines</p>
                <ul>
                    <li>Be kind, avoid personal contact info, and keep it non-clinical.</li>
                    <li>Need urgent help? Tap Crisis info in the header right away.</li>
                    <li>Stay present‚Äîno endless scrolling needed to send a note.</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<section id="resources" class="resource-grid-shell">
    <div class="resource-grid">
        {% for res in resources %}
        <article class="resource-card" data-tags="{{ res.tags|join(' ') }}">
            <div class="card-glow"></div>
            <div class="card-header">
                <div class="dot"></div>
                <div class="card-heading">
                    <p class="eyebrow">Featured</p>
                    <h3>{{ res.title }}</h3>
                </div>
                <span class="card-pill">Saved</span>
            </div>
            <p class="body">{{ res.description }}</p>
            <div class="links">
                {% for link in res.links %}
                <a href="{{ link.url }}" target="_blank" rel="noopener" class="link">{{ link.label }}</a>
                {% endfor %}
            </div>
            <div class="chip-row">
                {% for tag in res.tags %}
                <span class="chip">{{ tag }}</span>
                {% endfor %}
            </div>
        </article>
        {% endfor %}
    </div>
</section>

<div class="modal-backdrop video-modal" data-anxiety-video-modal>
    <div class="modal-dialog video-modal-dialog" role="dialog" aria-modal="true" aria-labelledby="anxietyVideoTitle">
        <div class="modal-glow"></div>
        <div class="modal-header">
            <div>
                <p class="eyebrow">Anxiety overview</p>
                <h3 id="anxietyVideoTitle">Anxiety symptoms explained</h3>
                <p class="body muted">Press play for a calm walkthrough without leaving the page.</p>
            </div>
            <button class="modal-close" type="button" aria-label="Close anxiety video" data-anxiety-video-close>&times;</button>
        </div>
        <div class="video-modal__body">
            <div class="video-frame" data-anxiety-video-frame>
                <div class="video-embed">
                    <iframe
                        title="Anxiety symptoms explained video"
                        data-anxiety-video
                        data-video-src="https://www.youtube.com/embed/QRqt4jxZQ0U?rel=0&modestbranding=1&playsinline=1"
                        src=""
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen
                    ></iframe>
                </div>
            </div>
            <p class="microcopy">The video opens centered on the page so you can stay grounded.</p>
        </div>
    </div>
</div>

<div class="modal-backdrop info-modal" data-anxiety-modal>
    <div class="modal-dialog info-modal-dialog" role="dialog" aria-modal="true" aria-labelledby="anxietyModalTitle">
        <div class="modal-glow"></div>
        <div class="modal-header">
            <div>
                <p class="eyebrow">Understanding anxiety</p>
                <h3 id="anxietyModalTitle">What is anxiety?</h3>
            </div>
            <button class="modal-close" type="button" aria-label="Close anxiety explainer" data-anxiety-close>&times;</button>
        </div>
        <div class="anxiety-modal__body">
            <p class="body">Anxiety is our body‚Äôs built-in alarm system. It helps us stay alert in stressful moments, but it can feel overwhelming when the worry sticks around, feels out of proportion, or makes daily life harder to navigate.</p>

            <div class="modal-grid">
                <article class="anxiety-card">
                    <p class="eyebrow">How it can show up</p>
                    <ul>
                        <li>Racing thoughts, constant ‚Äúwhat ifs,‚Äù or trouble concentrating</li>
                        <li>Restless energy, tight chest, faster heart rate, or unsettled stomach</li>
                        <li>Feeling on edge, irritable, or wanting to avoid certain places or tasks</li>
                    </ul>
                </article>
                <article class="anxiety-card">
                    <p class="eyebrow">When to reach out</p>
                    <ul>
                        <li>Your sleep, appetite, or daily routines are getting harder to keep</li>
                        <li>You‚Äôre avoiding friends, school, or work because of worry or panic</li>
                        <li>You want support processing trauma, health worries, or social fear</li>
                    </ul>
                </article>
                <article class="anxiety-card highlight">
                    <p class="eyebrow">Quick ways to ground</p>
                    <ul>
                        <li>Slow, steady breathing‚Äîtry a 4-2-5-2 rhythm for a few rounds</li>
                        <li>Name five things you can see, four you can touch, three you can hear</li>
                        <li>Take a sip of water, soften your shoulders, feel your feet on the floor</li>
                    </ul>
                </article>
            </div>

            <div class="anxiety-modal__actions">
                <a class="btn tiny" href="{{ url_for('calming_tools') }}">Open calming tools</a>
                <a class="btn ghost tiny" href="{{ url_for('crisis_info') }}">Find urgent support</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
